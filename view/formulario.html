{% extends "padre.html" %}

{% block title %}
    Registrar usuario
{% endblock %}

{% block main %}
    <div class="container">
    <div class="card bg-light my-5">
        <h1 class="card-header bg-dark text-center text-white">Registrar a un usuario</h1>
        <div class="card-body shadow-lg">
        {% if valores.boton == "Enviar datos" or valores.boton is empty %}
            <form action="/model/registrar_admin.php" method="POST" enctype="multipart/form-data" novalidate>
                <div class="row">
                    <div class="col align-self-center mb-4 mr-4 ml-4">
                        <label for="formFileSm" class="form-label {{valores.errorfoto ? 'is-invalid'}}">Fotografía</label>
                        <input class="form-control form-control-sm" name="foto" id="formFileSm" type="file">
                    {% if valores.errorfoto is not empty %}
                        <p class="invalid-feedback">{{valores.errorfoto}}</p>
                    {% endif %}
                    </div>
                    <div class="col mb-4 ml-4 text-center">
                        <img src="{{valores.foto ? valores.foto : '/assets/usuario.png'}}" class="rounded flex-shrink-0" witdh="256" height="256" alt="Imagen usuario por defecto"/>
                    </div>
                </div>
                
                <div class="form-floating mb-3">
                    <input class="form-control {{valores.errornombre ? 'is-invalid'}}" id="floatingnombre" type="text" name="nombre" placeholder="Escriba su nombre" value="{{valores.nombre}}" {{valores.sinerrores ? 'readonly'}}/>
                    <label for="floatingnombre">Nombre</label>
                {% if valores.errornombre is not empty %}
                    <p class="invalid-feedback">{{valores.errornombre}}</p>
                {% endif %}
                </div>

                <div class="form-floating mb-3">
                    <input class="form-control {{valores.errorapellido ? 'is-invalid'}}" id="floatingapellido" type="text" name="apellido" placeholder="Escriba su apellido" value="{{valores.apellido}}" {{valores.sinerrores ? 'readonly'}}/>
                    <label for="floatingapellido">Apellidos</label>
                {% if valores.errorapellido is not empty %}
                    <p class="invalid-feedback">{{valores.errorapellido}}</p>
                {% endif %}
                </div>

                <div class="form-floating mb-3">
                    <input class="form-control {{valores.errordni ? 'is-invalid'}}" id="floatingemail" type="text" name="dni" placeholder="Escriba su dni" value="{{valores.dni}}" {{valores.sinerrores ? 'readonly'}}/>
                    <label for="floatingemail">DNI</label>
                {% if valores.errordni is not empty %}
                    <p class="invalid-feedback">{{valores.errordni}}</p>
                {% endif %}
                </div>

                <div class="form-floating col mb-3">
                    <input class="form-control {{valores.erroremail ? 'is-invalid'}}" id="floatingemail" type="text" name="email" placeholder="Escriba su email" value="{{valores.email}}" {{valores.sinerrores ? 'readonly'}}/>
                    <label for="floatingemail">Email</label>
                {% if valores.erroremail is not empty %}
                    <p class="invalid-feedback">{{valores.erroremail}}</p>
                {% endif %}
                </div>

                <div class="form-floating col mb-3">
                    <input class="form-control {{valores.erroremail2 ? 'is-invalid'}}" id="floatingemail" type="text" name="email2" placeholder="Escriba su email" value="{{valores.email2}}" {{valores.sinerrores ? 'readonly'}}/>
                    <label for="floatingemail">Repetir email</label>
                {% if valores.erroremail2 is not empty %}
                    <p class="invalid-feedback">{{valores.erroremail2}}</p>
                {% endif %}
                </div>
                

                <div class="row">
                    <div class="form-floating col mb-3">
                        <input class="form-control {{valores.errorcontrasenia ? 'is-invalid'}}" id="floatingemail" type="password" name="contrasenia" placeholder="Escriba su contraseña" value="{{valores.contrasenia}}" {{valores.sinerrores ? 'readonly'}}/>
                        <label for="floatingemail">Contraseña</label>
                    {% if valores.errorcontrasenia is not empty %}
                        <p class="invalid-feedback">{{valores.errorcontrasenia}}</p>
                    {% endif %}
                    </div>

                    <div class="form-floating col mb-3">
                        <input class="form-control {{valores.errorcontrasenia2 ? 'is-invalid'}}" id="floatingemail" type="password" name="contrasenia2" placeholder="Escriba su contraseña" value="{{valores.contrasenia2}}" {{valores.sinerrores ? 'readonly'}}/>
                        <label for="floatingemail">Repetir contraseña</label>
                    {% if valores.errorcontrasenia2 is not empty %}
                        <p class="invalid-feedback">{{valores.errorcontrasenia2}}</p>
                    {% endif %}
                    </div>
                </div>

                <div class="form-floating mb-3">
                    <input class="form-control {{valores.errortelefono ? 'is-invalid'}}" id="floatingtelefono" type="text" name="telefono" placeholder="Escriba su telefono" value="{{valores.telefono}}" {{valores.sinerrores ? 'readonly'}}/>
                    <label for="floatingtelefono">Teléfono</label>
                {% if valores.errortelefono is not empty %}
                    <p class="invalid-feedback">{{valores.errortelefono}}</p>
                {% endif %}
                </div>

                <label for="formFecha">Fecha de nacimiento:</label>
                <div class="row" id=" id="formFecha"">
                    <div class="form-floating col mb-3">
                        <input class="form-control {{valores.errordia ? 'is-invalid'}}" id="floatingDia" type="text" name="dia" placeholder="Día" value="{{valores.dia}}" {{valores.sinerrores ? 'readonly'}}/>
                        <label for="floatingDia">Día</label>
                    {% if valores.errorfecha is not empty %}
                        <p class="invalid-feedback">{{valores.errorfecha}}</p>
                    {% endif %}
                    </div>
                    <div class="form-floating col mb-3">
                        <input class="form-control {{valores.errormes ? 'is-invalid'}}" id="floatingMes" type="text" name="mes" placeholder="Mes" value="{{valores.mes}}" {{valores.sinerrores ? 'readonly'}}/>
                        <label for="floatingMes">Mes</label>
                    </div>
                    <div class="form-floating col mb-3">
                        <input class="form-control {{valores.erroranyo ? 'is-invalid'}}" id="floatingAnyo" type="text" name="anyo" placeholder="anyo" value="{{valores.anyo}}" {{valores.sinerrores ? 'readonly'}}/>
                        <label for="floatingAnyo">Año</label>
                    </div>
                
                </div>

                <label for="genderform" class="form-label">Seleccione su género</label>
                <div class="form-check">
                    <input type="radio" class="form-check-input {{valores.errorsexo ? 'is-invalid'}}" id="genderform" name="sexo" value="Masculino" {{valores.sexo == 'Masculino' ? 'checked'}} {{valores.sinerrores and valores.sexo == 'Femenino' ? 'disabled'}} required>
                    <label class="form-check-label" for="validationFormCheck1">Masculino</label>
                </div>

                <div class="form-check mb-3">
                    <input type="radio" class="form-check-input {{valores.errorsexo ? 'is-invalid'}}" id="genderform" name="sexo" value="Femenino" {{valores.sexo == 'Femenino' ? 'checked'}} {{valores.sinerrores and valores.sexo == 'Masculino' ? 'disabled'}} required>
                    <label class="form-check-label" for="validationFormCheck2">Femenino</label>
                {% if valores.errorsexo is not empty %}
                    <p class="invalid-feedback">{{valores.errorsexo}}</p>
                {% endif %}
                </div>

                <div class="form-floating mb-3">
                    <select class="form-select" id="labelrol" name="rol">
                        <option value="Administrador" {{valores.rol == "admin" ? "checked"}} {{valores.sinerrores and valores.rol == "usuario" ? 'disabled'}}>Admin</option>
                        <option value="Usuario" {{valores.rol == "usuario" ? "checked"}} {{valores.sinerrores and valores.rol == "admin" ? 'disabled'}}>Usuario</option>
                    </select>
                    <label for="labelrol">Rol</label>
                </div>

                <div class="form-floating mb-3">
                    <select class="form-select" id="labelestado" name="estado">
                        <option value="Activo" {{valores.estado == "activo" ? "checked"}} {{valores.sinerrores and valores.estado == "inactivo" ? "disabled"}}>Activo</option>
                        <option value="Inactivo" {{valores.estado == "inactivo" ? "checked"}} {{valores.sinerrores and valores.estado == "activo" ? 'disabled'}}>Inactivo</option>
                    </select>
                    <label for="labelestado">Estado</label>
                </div>
                {% if not valores.sinerrores %}
                    <input class="btn btn-primary" type="submit" name="boton" value="Enviar datos"/>
                {% else %}
                    <input class="btn btn-primary" type="submit" name="boton" value="Validar datos si son correctos"/>
                {% endif %}
            </form>

        {% else %}
            <p>El usuario D/Da. {{valores.nombre}} {{valores.apellido}} ha sido insertado en el sistema correctamente.</p>
        {% endif %}
        </div>

    </div>
    </div>

{% endblock %}